pool:
  vmImage: 'ubuntu-latest'

steps:
- task: UseRubyVersion@0
  inputs:
    versionSpec: '>= 2.5'


- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      gem install gist
      (umask 0077 && echo $(MY_SECRET_TOKEN) > ~/.gist)
      gist -u b4e53b549f0deaa27a01ab9955bce674 resume.json

- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |     
      
      sudo npm install -g puppeteer
      sudo npm install -g resume-cli
      sudo npm install -g jsonresume-theme-kwan
      sudo npm audit fix --force

      mkdir ~/resume
      resume export --theme kwan
      resume export --format resume.md